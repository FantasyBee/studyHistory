## 使用Hugo和GitHub page搭建个人博客

### 一、Linux环境下先配置Go语言环境

一、下载Ｇo语言安装包

使用tar命令将档案包解压到/usr/local目录中:

sudo tar -C /usr/local -xzf go1.11.5.linux-amd64.tar.gz

二、添加环境变量和工作变量到系统环境中

先进入到profile文件目录

cd /etc

打开profile文件：

sudo gedit profile

把这下面的命令行添加到文件最末面：（第一个是go的安装包路径，第二个是你的开发空间，两个需要不同目录，否则会导致文件夹混淆）

#GO
export PATH=$PATH:/usr/local/go/bin
#GOPATH
export GOPATH=你的go工作空间目录
export PATH=$PATH:$GOPATH/bin

针对所有用户的需要重启电脑才可以生效；针对当前用户的，在终端里使用source命令加载这个$HOME/.profile即可生效。

source ~/.profile

三、查看当前go版本

任一命令行终端：

go version

如果输出类似如下，说明你的go安装环境和工作环境皆配置成功！

![81b2dd6d879fdbea0660762bb2dfcb7.png](../Typora/新建文件夹 (2)/Typora/ipic/1609922611624278.png)



### 二、安装Git

直接去官网安装Linux版本

[Git - 安装 Git (git-scm.com)](https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git)

安装完成后测试：git version

并且需要配置你的git用户邮箱与用户名



### 三、安装hugo

终端输入：sudo snap install hugo

检测：hugo version



### 四、创建GitHub仓库

### 创建博客源仓库

1. 命名**博客源仓库**（whatever you want）
2.  勾选 **Public**，设置为公开仓库。
3.  勾选添加 **README** 文件

### 创建 GitHub Page 仓库

1. 命名 **GitHub Pages** 仓库，这个仓库必须使用特殊的命名格式 `<username.github.io>`， `<username>` 是自己的 GitHub 的用户名。
2.  勾选 **Public**，设置为公开仓库。
3.  勾选添加 **README** 文件，这会设置 `main` 分支为仓库的默认主分支，这在后面提交推送博客内容时很重要。



### 五、 克隆博客源仓库到本地

1、打开想要在本地储存项目的文件夹（比如我的项目的文件夹是 `project` ）

cd project

2、克隆**博客源仓库**到项目文件夹，克隆时使用的 HTTPS 仓库链接

git clone https://github.com/miawithcode/cuttontail.git



### 六、 使用 Hugo 创建网站

1、进入刚刚克隆下来的**博客源仓库**文件夹（比如：我的博客源仓库文件夹名是 `cuttontail`，则`cd cuttontail` ），在这个文件夹里用 Hugo 创建一个网站文件夹。

2、用 Hugo 创建网站文件夹的命令是 `hugo new site 网站名字`。(比如，我的命名是 `cuttontail-blog`)

cd cuttontail
hugo new site cuttontail-blog

3、用 Hugo 创建的网站共有 7 个文件夹和 1 个文件，这些文件分别代表：

- **archetypes**：存放用 hugo 命令新建的 Markdown 文件应用的 front matter 模版
- **content**：存放内容页面，比如「博客」、「读书笔记」等
- **layouts**：存放定义网站的样式，写在`layouts`文件下的样式会覆盖安装的主题中的 `layouts`文件同名的样式
- **static**：存放所有静态文件，如图片
- **data**：存放创建站点时 Hugo 使用的其他数据
- **public**：存放 Hugo 生成的静态网页
- **themes**：存放主题文件
- **config.toml**：网站配置文件

### 七、 安装和配置 Hugo 主题

1、可以从 [Hugo 社区提供的主题](https://themes.gohugo.io/)中选择一个喜欢的主题应用在自己的网站中。

2、打开 Hugo Themes 页面，选择一个你喜欢的主题。

Hugo Themes: [https://themes.gohugo.io](https://link.zhihu.com/?target=https%3A//themes.gohugo.io/) 下文以**选择 Tranquilpeak 主题为例**。

3、将所选主题克隆至本地目录。

```
cd ~/lilian-blog  # 进入网站目录，用你的网站目录名替换 "lilian-blog"。
mkdir -p themes  # 创建 "themes" 目录。
cd themes  # 进入 "themes" 目录。
git clone https://github.com/kakawait/hugo-tranquilpeak-theme.git tranquilpeak 
# 将 Tranquilpeak 主题克隆至 "tranquilpeak" 目录。
```

### 八、编辑配置文件。

1、在 Hugo 网站文件夹的根目录下，使用 [Visual Studio Code](https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/s/lt9XzlAOzpIqPLMuUBVNLw) 打开 `config.toml` 文件。

如果你还没用过 Visual Studio Code，建议下载安装一下，是一个很好用的开源文本编辑器，同时支持 Windows、Linux 和 macOS 操作系统。

2、 参考所选 Hugo 主题的配置说明，编辑 `config.toml` 文件。

**注意**：`theme` 配置项指的是所选主题的名称，必须与所选主题被克隆至的目录名相同。在本例中，即 `theme = "tranquilpeak"`。

### 九、新建一篇文章。

1、 进入网站文件夹的根目录。

```
cd ~/lilian-blog  # "lilian-blog" 为网站文件夹名。 
```

2 、使用以下命令新建一篇文章。

```
hugo new post/my-first-post.md  # "my-first-post.md" 是新建文章的文件名。
```

3、编辑新建的文章，添加内容并保存。

### 十、本地预览网站效果

1、启动 Hugo server。

```
hugo server -D
```

2、 使用浏览器打开 [http://localhost:1313](https://link.zhihu.com/?target=http%3A//localhost%3A1313/) 预览。

### 十一、构建 Hugo 网站。

在 Hugo 网站文件夹的根目录下，执行 `hugo` 命令来构建。

hugo

**注意**：Hugo 会将构建的网站内容默认保存至网站根目录的 `public/` 文件夹中。

### 十二、将网站文件夹转换为 Git 库。

1、进入 public 目录，初始化 Git 库。

- GitHub 创建仓库时生成的默认主分支名是 `main`
- 用 `git init` 初始化 Git 仓库时创建的默认主分支名是 `master`
- 将 `git init` 创建的 `master` 修改成 `main` ，再推送给远端仓库 `<username>.github.io` ，这样才不会报错。

```
cd public
# 生成的 HTML 文件保存在 "public" 目录中，"public" 文件夹会被转换为 Git 库。 
git init -b main # 初始化 Git 库。
```

2、查看 public 目录下的文件，会发现多了 .git 文件。

3、将 `public`  文件夹关联远程 GitHub Pages 仓库，使用 GitHub Pages 仓库的 SSH 链接。

（需要自己寻找在Linux下配置ssh密钥，然后再去GitHub配置的教程）

git remote add origin git@github.com:miawithcode/miawithcode.github.io.git

4、推送**博客源仓库**的  `public`  文件夹中的 HTML 网页文件到 **GitHub Pages 仓库** 中，在推送仓库内容前要先用 `git pull --rebase origin main` 和远端仓库同步，否则会报错。

git pull --rebase origin main
git add .
git commit -m "...(修改的信息)"
git push origin main

5、转到 GitHub 查看 **GitHub Pages 仓库**中是否存在刚刚推送的文件，存在则代表推送成功。

6、如果你没有设置自定义域名，且把 `comfig.toml` 文件中的 `baseURL` 设置为 `https://<username>.github.io`，就可以在 [https://username.github.io](https://cuttontail.blog/blog/create-a-wesite-using-github-pages-and-hugo/) 中查看刚刚创建的网站。 ( 👀 我使用的是自定义域名，所以这里用我的自定义域名查看。)

十三、更新步骤

1. 创建你的文章`xxx.md`

2. 用 `hugo server` 在本地预览，满意后准备发布。

3. 运行 `hugo` 命令将 Markdown 文件生成 HTML 文件。

4. 将修改先提交至博客源仓库

5. git add .

   git commit -m "...(修改的信息)"
   git push

   ​

   6、打开 `public` 文件

   7、运行：

   git add .
   git commit -m "...(修改的信息)"
   git pull --rebase origin main #可选,如果远端仓库与本地一致，则不需要合并。
   git push origin main

   8、

   如果你使用的是自定义域名，第一次推送成功后，GitHub Pages 仓库会生成 CNAME 文件，所以第二次推送还要再合并一次：`git pull --rebase origin main`。后续更新博客就不再需要使用这个命令了。（根据实际情况使用）

最后就是成功配置之后可以直接访问自己的博客，比如我的博客地址是：

https://fantasybee.github.io/abc2580.github.io/

















